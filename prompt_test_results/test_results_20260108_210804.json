[
  {
    "prompt_num": 1,
    "prompt": "Build a disco ball that rotates while projecting colored light beams in random directions, plays electronic music that changes tempo based on how many players are nearby, and spawns glitter particles that drift downward and fade over 3 seconds when any object passes through the light beams.",
    "timestamp": "2026-01-08T21:05:08.153049",
    "oneshot_code": "using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.Events;\n\n[System.Serializable]\npublic class DiscoPlayerCount\n{\n    public int currentPlayers = 0;\n    public int maxPlayers = 4;\n}\n\npublic class DiscoBall : MonoBehaviour\n{\n    [Header(\"Disco Ball Settings\")]\n    [SerializeField] private float _rotationSpeed = 100f;\n    [SerializeField] private bool _useRandomRotation = true;\n    [SerializeField] private float _minRotationAngle = -45f;\n    [SerializeField] private float _maxRotationAngle = 45f;\n    \n    [Header(\"Light Projection\")]\n    [SerializeField] private Light[] _lightSources = new Light[8];\n    [SerializeField] private Color[] _beamColors = new Color[8];\n    [SerializeField] private bool _enableBeamProjection = true;\n    [SerializeField] private float _beamIntensity = 1.5f;\n    \n    [Header(\"Music\")]\n    [SerializeField] private AudioSource _musicSource;\n    [SerializeField] private AudioClip[] _musicTracks;\n    [SerializeField] private float _minTempo = 0.8f;\n    [SerializeField] private float _maxTempo = 2f;\n    [SerializeField] private float _tempoSensitivity = 1f;\n    \n    [Header(\"Glitter Settings\")]\n    [SerializeField] private ParticleSystem[] _glitterSystems = new ParticleSystem[4];\n    [SerializeField] private float _glitterSpeed = 5f;\n    [SerializeField] private float _glitterLifetime = 3f;\n    [SerializeField] private int _maxGlitterParticlesPerSpawn = 1000;\n    \n    [Header(\"Detection\")]\n    [SerializeField] private bool _detectNearbyPlayers = true;\n    [SerializeField] private float _detectionRadius = 10f;\n    [SerializeField] private int _playerCountGoal = 2;\n    [SerializeField] private float _tempoChangeSpeed = 0.5f;\n    \n    [Header(\"Events\")]\n    public UnityEvent OnPlayerCountChanged;\n    public UnityEvent OnMusicTempoChanged;\n    \n    private float _currentRotationAngle = 0f;\n    private int _currentPlayerCount = 0;\n    private float _currentTempo = 1f;\n    private Coroutine _rotationCoroutine;\n    private List<DiscoPlayerCount> _playerCountHistory = new List<DiscoPlayerCount>();\n    \n    void Start()\n    {\n        InitializeLights();\n        SetupMusic();\n        SetupGlitterSystems();\n        \n        if (_musicSource == null)\n            _musicSource = GetComponent<AudioSource>();\n            \n        if (_enableBeamProjection && _lightSources.Length > 0)\n        {\n            for (int i = 0; i < _lightSources.Length; i++)\n                _lightSources[i].enabled = false;\n        }\n        \n        StartRotation();\n    }\n    \n    void Update()\n    {\n        DetectPlayers();\n        UpdateMusicTempo();\n        UpdatePlayerCountHistory();\n        \n        if (_useRandomRotation)\n            _currentRotationAngle += Random.Range(-_rotationSpeed * Time.deltaTime, _rotationSpeed * Time.deltaTime);\n        else\n            _currentRotationAngle += _rotationSpeed * Time.deltaTime;\n        \n        RotateDiscoBall();\n    }\n    \n    void InitializeLights()\n    {\n        for (int i = 0; i < _lightSources.Length; i++)\n        {\n            if (_enableBeamProjection)\n            {\n                float angle = (i + 1f) * 45f / _lightSources.Length;\n                Vector3 direction = new Vector3(\n                    Mathf.Cos(angle),\n                    Mathf.Sin(angle),\n                    0\n                );\n                direction.Normalize();\n                \n                _lightSources[i].type = Light.type.InverseSquareBeam;\n                _lightSources[i].color = _beamColors[i % _beamColors.Length];\n                _lightSources[i].range = 15f;\n                _lightSources[i].intensity = _beamIntensity;\n                _lightSources[i].direction = direction;\n            }\n        }\n    }\n    \n    void SetupMusic()\n    {\n        if (_musicSource == null || _musicTracks.Length == 0)\n        {\n            Debug.LogWarning(\"DiscoBall requires a music source and audio clips!\");\n            return;\n        }\n        \n        for (int i = 0; i < _musicTracks.Length; i++)\n        {\n            _musicSource.clip = _musicTracks[i];\n            _musicSource.loop = true;\n            _musicSource.volume = 1f;\n        }\n    }\n    \n    void SetupGlitterSystems()\n    {\n        for (int i = 0; i < _glitterSystems.Length; i++)\n        {\n            if (_glitterSystems[i] == null) continue;\n            \n            var main = _glitterSystems[i].GetComponent<ParticleSystem>();\n            if (main != null)\n            {\n                main.startLifetime = _glitterLifetime;\n                main.maxParticlesPerSecond = _maxGlitterParticlesPerSpawn;\n            }\n        }\n    }\n    \n    void DetectPlayers()\n    {\n        _currentPlayerCount = 0;\n        \n        Collider[] colliders = Physics.OverlapSphere(transform.position, _detectionRadius);\n        \n        foreach (Collider col in colliders)\n        {\n            if (col.CompareTag(\"Player\"))\n                _currentPlayerCount++;\n        }\n    }\n    \n    void UpdateMusicTempo()\n    {\n        if (_musicSource == null) return;\n        \n        float targetTempo = Mathf.Lerp(_minTempo, _maxTempo, \n            (_currentPlayerCount / _playerCountGoal) * 0.5f);\n        \n        _musicSource.pitch = targetTempo;\n    }\n    \n    void UpdatePlayerCountHistory()\n    {\n        _playerCountHistory.Add(new DiscoPlayerCount\n        {\n            currentPlayers = _currentPlayerCount,\n            maxPlayers = Mathf.Min(_detectionRadius, _playerCountHistory.Count)\n        });\n        \n        if (_playerCountHistory.Count > 10)\n            _playerCountHistory.RemoveAt(0);\n        \n        OnPlayerCountChanged?.Invoke();\n    }\n    \n    void RotateDiscoBall()\n    {\n        transform.Rotate(Vector3.up * _rotationSpeed, Space.Self);\n    }\n    \n    void StartRotation()\n    {\n        if (_rotationCoroutine != null)\n            StopCoroutine(_rotationCoroutine);\n            \n        _rotationCoroutine = StartCoroutine(RotationLoop());\n    }\n    \n    IEnumerator RotationLoop()\n    {\n        while (true)\n        {\n            yield return new WaitForSeconds(1f / _rotationSpeed);\n            _currentRotationAngle += Random.Range(-_rotationSpeed * Time.deltaTime, _rotationSpeed * Time.deltaTime);\n            transform.Rotate(Vector3.up * _currentRotationAngle, Space.Self);\n        }\n    }\n    \n    void OnTriggerEnter(Collider other)\n    {\n        if (other.CompareTag(\"Player\"))\n        {\n            PlayGlitterEffect(other.transform.position);\n        }\n        \n        if (_enableBeamProjection && other.transform != null)\n        {\n            Vector3 direction = new Vector3(\n                Mathf.Cos(_currentRotationAngle),\n                Mathf.Sin(_currentRotationAngle),\n                0\n            ).normalized;\n            \n            RaycastHit hit;\n            if (Physics.Raycast(other.transform.position, direction * 15f, out hit))\n            {\n                // Apply glow to the hit surface\n                var target = hit.collider.gameObject;\n                var material = target.GetComponent<Renderer>().material;\n                if (material != null)\n                {\n                    Color originalColor = material.color;\n                    material.color = new Color(\n                        originalColor.r,\n                        originalColor.g * 0.5f + 0.3f,\n                        originalColor.b * 0.5f + 0.7f\n                    );\n                }\n            }\n        }\n    }\n    \n    void PlayGlitterEffect(Vector3 position)\n    {\n        Collider[] colliders = Physics.OverlapSphere(position, 2f);\n        \n        foreach (Collider col in colliders)\n        {\n            if (_glitterSystems.Length > 0)\n            {\n                var system = _glitterSystems[Random.Range(0, _glitterSystems.Length)];\n                if (system != null && system.isPlaying)\n                    system.Play();\n            }\n        }\n    }\n    \n    void OnDrawGizmosSelected()\n    {\n        Gizmos.color = Color.yellow;\n        \n        for (int i = 0; i < _lightSources.Length; i++)\n        {\n            Vector3 direction = new Vector3(\n                Mathf.Cos(i * 45f / _lightSources.Length),\n                Mathf.Sin(i * 45f / _lightSources.Length),\n                0\n            ).normalized;\n            \n            Gizmos.DrawRay(transform.position, direction * 15f);\n        }\n    }\n    \n    void OnDestroy()\n    {\n        if (_rotationCoroutine != null)\n            StopCoroutine(_rotationCoroutine);\n    }\n}",
    "ir_json": null,
    "ir_code": null,
    "ir_steered": false,
    "ir_rag_docs": 0,
    "ir_rag_doc_names": null,
    "per_behavior_code": null,
    "per_behavior_docs": 0,
    "per_behavior_methods": 0,
    "per_behavior_doc_names": null,
    "grade": null,
    "error": null
  }
]